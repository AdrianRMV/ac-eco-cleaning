---
import logo from '../images/logo-rebeca.png';

const currentPath = Astro.url.pathname;
const navItems = [
	{ href: '/', label: 'Home' },
	{ href: '/about', label: 'About' },
	{ href: '/services', label: 'Services' },
	{ href: '/contact', label: 'Contact' },
];
---

<nav class="bg-primary-dark shadow-lg sticky top-0 z-50 border-b-2 border-accent/20">
	<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
		<div class="flex justify-between items-center h-20">
			<!-- Logo -->
			<a href="/" class="flex items-center space-x-3 hover:opacity-90 transition-opacity">
				<img src={logo.src} alt="Rebeca Eco Clean Logo" class="h-12 sm:h-14 w-auto" />
			</a>

			<!-- Desktop Navigation -->
			<div class="hidden md:flex items-center space-x-1">
				{navItems.map((item) => (
					<a
						href={item.href}
						class={`px-4 py-2 rounded-lg text-sm font-semibold transition-all duration-200 ${
							currentPath === item.href
								? 'text-primary-dark bg-accent shadow-md'
								: 'text-white hover:text-accent hover:bg-white/10'
						}`}
					>
						{item.label}
					</a>
				))}
			</div>

			<!-- Mobile Menu Button -->
			<button
				id="mobile-menu-button"
				class="md:hidden p-2 rounded-lg text-white hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-accent transition-colors"
				aria-label="Toggle menu"
			>
				<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
				</svg>
			</button>
		</div>

		<!-- Mobile Navigation -->
		<div id="mobile-menu" class="hidden md:hidden pb-4">
			<div class="flex flex-col space-y-2 pt-2">
				{navItems.map((item) => (
					<a
						href={item.href}
						class={`px-4 py-3 rounded-lg text-base font-semibold transition-all ${
							currentPath === item.href
								? 'text-primary-dark bg-accent shadow-md'
								: 'text-white hover:text-accent hover:bg-white/10'
						}`}
					>
						{item.label}
					</a>
				))}
			</div>
		</div>
	</div>
</nav>

<script>
	// Use event delegation so one listener works for current and future DOM (e.g. after View Transitions swap).
	document.addEventListener('click', (e) => {
		const button = e.target?.closest('#mobile-menu-button');
		const menu = document.getElementById('mobile-menu');
		if (button && menu) {
			menu.classList.toggle('hidden');
		}
	});
</script>

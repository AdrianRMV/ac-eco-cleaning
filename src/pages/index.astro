---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';
import ReviewSlider from '../components/ReviewSlider.astro';

// Imágenes de fondo optimizadas (Unsplash, w=1920&q=75 para buen balance calidad/peso)
const heroSlides = [
	{ src: 'https://images.unsplash.com/photo-1581578731548-c64695cc6952?w=1920&q=75&fit=crop', alt: 'Cleaning service' },
	{ src: 'https://images.unsplash.com/photo-1562259949-e8e7689d7828?w=1920&q=75&fit=crop', alt: 'Painting service' },
	{ src: 'https://images.unsplash.com/photo-1621905251189-08b45d6a269e?w=1920&q=75&fit=crop', alt: 'Pressure washing' },
	{ src: 'https://images.unsplash.com/photo-1504309092620-4d0ec7265f9d?w=1920&q=75&fit=crop', alt: 'Construction' },
];
---

<Layout title="AC ECO CLEAN & CONTRUCT LTD">
    <Navbar />

    <!-- Hero Section: slider de fondos + parallax -->
    <section class="hero-section relative min-h-[28rem] sm:min-h-[32rem] flex items-center justify-center overflow-hidden bg-primary">
        <div id="hero-parallax-layer" class="hero-bg-layer absolute inset-0">
            {heroSlides.map((slide, i) => (
                <img
                    src={slide.src}
                    alt={slide.alt}
                    width="1920"
                    height="1080"
                    decoding="async"
                    fetchpriority={i === 0 ? 'high' : 'low'}
                    loading={i === 0 ? 'eager' : 'lazy'}
                    class={`hero-slide absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ease-in-out ${i === 0 ? 'opacity-100' : 'opacity-0'}`}
                    data-index={i}
                />
            ))}
        </div>
        <div class="absolute inset-0 bg-primary/70"></div>
        <div class="absolute inset-0 bg-black/40"></div>
        <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 sm:py-32 z-10">
            <div class="text-center text-white">
                <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-6">
                    AC ECO CLEAN & CONTRUCT LTD
                </h1>
                <p class="text-xl sm:text-2xl mb-8 text-accent-soft max-w-3xl mx-auto">
                    Cleaning, painting, pressure washing & construction.
                    Professional services for homes and commercial spaces.
                </p>
                <p class="text-sm sm:text-base text-white/80 mb-8 max-w-2xl mx-auto">
                    Cleaning · Painting · Pressure Washing · Construction
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a
                        href="/contact"
                        class="bg-accent text-primary px-8 py-3 rounded-lg font-semibold text-lg hover:bg-accent-soft transition-colors shadow-lg"
                    >
                        Get a Free Quote
                    </a>
                    <a
                        href="/services"
                        class="bg-transparent border-2 border-accent text-white px-8 py-3 rounded-lg font-semibold text-lg hover:bg-accent hover:text-primary transition-colors"
                    >
                        Our Services
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="text-center">
                    <div
                        class="bg-accent-soft w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4"
                    >
                        <svg
                            class="w-8 h-8 text-primary"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                            ></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Cleaning</h3>
                    <p class="text-gray-600">
                        Eco-friendly cleaning for homes and commercial spaces.
                    </p>
                </div>
                <div class="text-center">
                    <div
                        class="bg-accent-soft w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4"
                    >
                        <svg
                            class="w-8 h-8 text-primary"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                            ></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">
                        Painting & Pressure Washing
                    </h3>
                    <p class="text-gray-600">
                        Interior and exterior painting. Driveways, patios, and facades.
                    </p>
                </div>
                <div class="text-center">
                    <div
                        class="bg-accent-soft w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4"
                    >
                        <svg
                            class="w-8 h-8 text-primary"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"
                            ></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Construction</h3>
                    <p class="text-gray-600">
                        Building and renovation. Quality work, delivered on time.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Reviews Section -->
    <ReviewSlider />

    <!-- Call to Action Section -->
    <section class="py-16 bg-primary text-white">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-3xl font-bold mb-4">
                Ready to Experience the Difference?
            </h2>
            <p class="text-xl mb-8 text-accent-soft">
                Contact us today for a free consultation and quote.
            </p>
            <a
                href="/contact"
                class="inline-block bg-accent text-primary px-8 py-3 rounded-lg font-semibold text-lg hover:bg-accent-soft transition-colors shadow-lg"
            >
                Contact Us Now
            </a>
        </div>
    </section>

    <Footer />
</Layout>

<style>
    .hero-section {
        isolation: isolate;
    }
    .hero-bg-layer {
        will-change: transform;
    }
    .hero-slide {
        pointer-events: none;
    }
</style>

<script>
    (function () {
        const slides = document.querySelectorAll('.hero-slide');
        const layer = document.getElementById('hero-parallax-layer');
        const section = document.querySelector('.hero-section');
        if (!slides.length || !layer || !section) return;

        const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        let current = 0;
        const total = slides.length;

        function showSlide(index) {
            current = (index + total) % total;
            slides.forEach((el, i) => {
                el.classList.toggle('opacity-100', i === current);
                el.classList.toggle('opacity-0', i !== current);
            });
        }

        if (!prefersReducedMotion) {
            setInterval(() => showSlide(current + 1), 5500);
        }

        function onScroll() {
            if (prefersReducedMotion) return;
            const rect = section.getBoundingClientRect();
            if (rect.bottom < 0 || rect.top > window.innerHeight) return;
            const scrolled = -rect.top;
            const y = scrolled * 0.25;
            layer.style.transform = `translate3d(0, ${y}px, 0)`;
        }

        let ticking = false;
        window.addEventListener('scroll', () => {
            if (!ticking) {
                requestAnimationFrame(() => {
                    onScroll();
                    ticking = false;
                });
                ticking = true;
            }
        }, { passive: true });
        onScroll();
    })();
</script>
